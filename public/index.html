<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Tiempo Real</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#e4e6eb;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.container{
  width:380px;
  height:650px;
  background:white;
  border-radius:15px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

.header{
  background:#0084ff;
  color:white;
  padding:15px;
  text-align:center;
  font-weight:bold;
}

.messages{
  flex:1;
  padding:10px;
  overflow-y:auto;
}

.message{
  margin:5px 0;
  padding:8px 12px;
  border-radius:15px;
  max-width:75%;
}

.me{
  background:#0084ff;
  color:white;
  margin-left:auto;
}

.other{
  background:#f0f0f0;
}

.input-area{
  display:flex;
  padding:10px;
  border-top:1px solid #ddd;
}

input{
  flex:1;
  padding:8px;
  border-radius:20px;
  border:1px solid #ccc;
}

button{
  background:#0084ff;
  color:white;
  border:none;
  padding:8px 12px;
  border-radius:20px;
  margin-left:5px;
}

#loginScreen{
  position:absolute;
  background:white;
  width:380px;
  height:650px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
</style>
</head>
<body>

<div class="container">

<div id="loginScreen">
  <h2>Iniciar Sesi√≥n</h2>
  <input type="text" id="username" placeholder="Tu nombre">
  <button onclick="login()">Entrar</button>
</div>

<div class="header">Chat en Vivo</div>
<div class="messages" id="messages"></div>

<div class="input-area">
  <input type="text" id="msgInput" placeholder="Escribe...">
  <button onclick="sendMessage()">Enviar</button>
</div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
let myName = "";

function login(){
  myName = document.getElementById("username").value.trim();
  if(myName === "") return;
  socket.emit("login", myName);
  document.getElementById("loginScreen").style.display = "none";
}

function sendMessage(){
  const input = document.getElementById("msgInput");
  if(input.value.trim() === "") return;
  socket.emit("message", input.value);
  input.value = "";
}

socket.on("message", (data)=>{
  const div = document.createElement("div");
  div.classList.add("message");
  div.classList.add(data.user === myName ? "me" : "other");
  div.textContent = data.user + ": " + data.text;
  document.getElementById("messages").appendChild(div);
});
</script>

</body>
</html>
